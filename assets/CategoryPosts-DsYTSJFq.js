import{j as z,r as C,d as p,H as A,w as U,q as n,u as t,B as M,v as m,x as _,p as E,D as I,z as i,L as T,M as $,N as S,y as r,F as y,C as w,s as l,G as F,A as H,O as J}from"./vue-DoCjM5oa.js";import{u as Z,c as G,_ as O}from"./index-B04ngb4W.js";import{P as K}from"./PostCard-D3-3A8ug.js";import{P as Q}from"./PaginationComponent-BPtgCvUD.js";import"./libs--DbO3urw.js";import"./markdown--zrfzkwQ.js";import"./highlight-CjIDkcmk.js";import"./katex-734Zlhpu.js";const W={class:"category-posts"},X={class:"container py-5"},Y={class:"row mb-5"},tt={class:"col-12"},st={class:"category-header text-center"},et={class:"mb-3"},at={class:"category-info mb-4"},ot={class:"category-icon mx-auto mb-3"},lt={class:"display-5 fw-bold mb-3"},nt={class:"lead text-muted"},it={class:"row justify-content-center"},rt={class:"col-md-8"},dt={class:"card bg-light"},ct={class:"card-body"},ut={class:"row text-center"},mt={class:"col-4"},ft={class:"text-primary fw-bold"},vt={class:"col-4"},gt={class:"text-success fw-bold"},pt={class:"col-4"},_t={class:"text-info fw-bold"},bt={key:0,class:"row mb-4"},ht={class:"col-md-6"},yt={class:"d-flex align-items-center"},wt={class:"col-md-6"},xt={class:"d-flex align-items-center justify-content-md-end"},Pt={class:"btn-group",role:"group"},kt={key:1,class:"row mb-4"},Ct={class:"col-12"},Mt={class:"card"},Tt={class:"card-body"},Dt={class:"d-flex flex-wrap gap-2"},Bt={class:"badge bg-light text-success ms-1"},St={key:2},jt={key:0,class:"row"},Nt={key:1,class:"row"},qt={class:"col-12"},Vt={class:"card-body"},Lt={class:"row align-items-center"},Rt={class:"col-md-8"},zt={class:"card-title mb-2"},At={key:0,class:"badge bg-warning text-dark ms-2"},Ut={class:"card-text text-muted mb-2"},Et={class:"d-flex flex-wrap gap-1 mb-2"},It={class:"col-md-4 text-md-end"},$t={class:"text-muted small mb-2"},Ft={class:"mb-1"},Ht={class:"mb-1"},Jt={class:"row mt-5"},Zt={class:"col-12"},Gt={key:3,class:"text-center py-5"},Ot={class:"text-muted mb-4"},Kt=z({__name:"CategoryPosts",props:{name:{}},setup(j){const D=j,c=A(),B=J(),b=Z(),d=C(1),h=C("date-desc"),f=C("grid"),x=p(()=>{const e=D.name||c.params.name,s=b.categories.find(o=>o.slug===e);return s?s.name:e.replace(/-/g," ")}),u=p(()=>{const e=D.name||c.params.name;return b.getPostsByCategory(e)}),P=p(()=>{const e=[...u.value];switch(h.value){case"date-asc":return e.sort((s,o)=>new Date(s.date).getTime()-new Date(o.date).getTime());case"title-asc":return e.sort((s,o)=>s.title.localeCompare(o.title));case"title-desc":return e.sort((s,o)=>o.title.localeCompare(s.title));case"date-desc":default:return e.sort((s,o)=>new Date(o.date).getTime()-new Date(s.date).getTime())}}),v=p(()=>{const e=b.config.pagination.postsPerPage,s=(d.value-1)*e,o=s+e,a=P.value.slice(s,o),g=Math.ceil(P.value.length/e);return{posts:a,currentPage:d.value,totalPages:g,hasNext:d.value<g,hasPrev:d.value>1,total:P.value.length}}),k=p(()=>{const e=new Map;return u.value.forEach(s=>{s.tags.forEach(o=>{e.set(o,(e.get(o)||0)+1)})}),Array.from(e.entries()).map(([s,o])=>({name:s,slug:s.toLowerCase().replace(/\s+/g,"-"),count:o})).sort((s,o)=>o.count-s.count).slice(0,10)});function N(e){return{前端开发:"fas fa-code",后端开发:"fas fa-server",Vue:"fab fa-vuejs",React:"fab fa-react",JavaScript:"fab fa-js-square",TypeScript:"fas fa-file-code",CSS:"fab fa-css3-alt",HTML:"fab fa-html5","Node.js":"fab fa-node-js",Python:"fab fa-python",Java:"fab fa-java",数据库:"fas fa-database",算法:"fas fa-project-diagram",设计:"fas fa-palette",工具:"fas fa-tools",开发工具:"fas fa-wrench",版本控制:"fab fa-git-alt",生活:"fas fa-heart",思考:"fas fa-lightbulb",教程:"fas fa-graduation-cap",经验:"fas fa-star",公告:"fas fa-bullhorn"}[e]||"fas fa-folder"}function q(){const e=b.publishedPosts.length;return e>0?Math.round(u.value.length/e*100):0}function V(){return k.value.length}function L(e){return new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})}function R(e){d.value=e,B.push({name:"CategoryPosts",params:{name:c.params.name},query:{...c.query,page:e>1?e.toString():void 0}}),window.scrollTo({top:0,behavior:"smooth"})}if(U(h,()=>{d.value=1,B.push({name:"CategoryPosts",params:{name:c.params.name},query:{}})}),c.query.page){const e=parseInt(c.query.page);e>0&&(d.value=e)}return(e,s)=>{const o=E("router-link");return l(),n("div",W,[t("div",X,[t("div",Y,[t("div",tt,[t("div",st,[t("div",et,[m(o,{to:"/categories",class:"btn btn-outline-secondary btn-sm"},{default:_(()=>s[3]||(s[3]=[t("i",{class:"fas fa-arrow-left me-2"},null,-1),r(" 返回分类列表 ",-1)])),_:1,__:[3]})]),t("div",at,[t("div",ot,[t("i",{class:I([N(x.value),"text-primary"])},null,2)]),t("h1",lt,i(x.value),1),t("p",nt," 共 "+i(u.value.length)+" 篇文章 ",1)]),t("div",it,[t("div",rt,[t("div",dt,[t("div",ct,[t("div",ut,[t("div",mt,[t("h4",ft,i(u.value.length),1),s[4]||(s[4]=t("small",{class:"text-muted"},"文章总数",-1))]),t("div",vt,[t("h4",gt,i(q())+"%",1),s[5]||(s[5]=t("small",{class:"text-muted"},"占总文章",-1))]),t("div",pt,[t("h4",_t,i(V()),1),s[6]||(s[6]=t("small",{class:"text-muted"},"相关标签",-1))])])])])])])])])]),u.value.length>0?(l(),n("div",bt,[t("div",ht,[t("div",yt,[s[8]||(s[8]=t("label",{for:"sortBy",class:"form-label me-3 mb-0"},"排序方式：",-1)),T(t("select",{id:"sortBy","onUpdate:modelValue":s[0]||(s[0]=a=>h.value=a),class:"form-select",style:{width:"auto"}},s[7]||(s[7]=[t("option",{value:"date-desc"},"最新发布",-1),t("option",{value:"date-asc"},"最早发布",-1),t("option",{value:"title-asc"},"标题 A-Z",-1),t("option",{value:"title-desc"},"标题 Z-A",-1)]),512),[[$,h.value]])])]),t("div",wt,[t("div",xt,[s[11]||(s[11]=t("label",{for:"viewMode",class:"form-label me-3 mb-0"},"显示模式：",-1)),t("div",Pt,[T(t("input",{type:"radio",class:"btn-check",name:"viewMode",id:"grid-view","onUpdate:modelValue":s[1]||(s[1]=a=>f.value=a),value:"grid"},null,512),[[S,f.value]]),s[9]||(s[9]=t("label",{class:"btn btn-outline-primary",for:"grid-view"},[t("i",{class:"fas fa-th"})],-1)),T(t("input",{type:"radio",class:"btn-check",name:"viewMode",id:"list-view","onUpdate:modelValue":s[2]||(s[2]=a=>f.value=a),value:"list"},null,512),[[S,f.value]]),s[10]||(s[10]=t("label",{class:"btn btn-outline-primary",for:"list-view"},[t("i",{class:"fas fa-list"})],-1))])])])])):M("",!0),k.value.length>0?(l(),n("div",kt,[t("div",Ct,[t("div",Mt,[t("div",Tt,[s[12]||(s[12]=t("h6",{class:"card-title mb-3"},[t("i",{class:"fas fa-tags text-success me-2"}),r(" 相关标签 ")],-1)),t("div",Dt,[(l(!0),n(y,null,w(k.value,a=>(l(),F(o,{key:a.name,to:`/tag/${a.slug}`,class:"badge bg-success text-decoration-none fs-6 py-2 px-3"},{default:_(()=>[r(" #"+i(a.name)+" ",1),t("span",Bt,i(a.count),1)]),_:2},1032,["to"]))),128))])])])])])):M("",!0),v.value.posts.length>0?(l(),n("div",St,[f.value==="grid"?(l(),n("div",jt,[(l(!0),n(y,null,w(v.value.posts,a=>(l(),n("div",{key:a.id,class:"col-lg-4 col-md-6 mb-4"},[m(K,{post:a},null,8,["post"])]))),128))])):(l(),n("div",Nt,[t("div",qt,[(l(!0),n(y,null,w(v.value.posts,a=>(l(),n("div",{key:a.id,class:"card mb-4 post-list-item"},[t("div",Vt,[t("div",Lt,[t("div",Rt,[t("h5",zt,[m(o,{to:`/post/${a.slug}`,class:"text-decoration-none text-dark"},{default:_(()=>[r(i(a.title),1)]),_:2},1032,["to"]),a.featured?(l(),n("span",At,s[13]||(s[13]=[t("i",{class:"fas fa-star"},null,-1),r(" 精选 ",-1)]))):M("",!0)]),t("p",Ut,i(a.excerpt),1),t("div",Et,[(l(!0),n(y,null,w(a.tags.slice(0,3),g=>(l(),n("span",{key:g,class:"badge bg-secondary"}," #"+i(g),1))),128))])]),t("div",It,[t("div",$t,[t("div",Ft,[s[14]||(s[14]=t("i",{class:"fas fa-user me-1"},null,-1)),r(" "+i(a.author),1)]),t("div",Ht,[s[15]||(s[15]=t("i",{class:"fas fa-calendar me-1"},null,-1)),r(" "+i(L(a.date)),1)]),t("div",null,[s[16]||(s[16]=t("i",{class:"fas fa-clock me-1"},null,-1)),r(" "+i(a.readTime||H(G)(a.content))+" 分钟阅读 ",1)])]),m(o,{to:`/post/${a.slug}`,class:"btn btn-outline-primary btn-sm"},{default:_(()=>s[17]||(s[17]=[r(" 阅读全文 ",-1),t("i",{class:"fas fa-arrow-right ms-1"},null,-1)])),_:2,__:[17]},1032,["to"])])])])]))),128))])])),t("div",Jt,[t("div",Zt,[m(Q,{"current-page":d.value,"total-pages":v.value.totalPages,total:v.value.total,onPageChange:R},null,8,["current-page","total-pages","total"])])])])):(l(),n("div",Gt,[s[19]||(s[19]=t("i",{class:"fas fa-file-alt text-muted",style:{"font-size":"4rem"}},null,-1)),s[20]||(s[20]=t("h3",{class:"mt-3 text-muted"},"该分类下暂无文章",-1)),t("p",Ot,i(x.value)+" 分类下还没有发布任何文章",1),m(o,{to:"/posts",class:"btn btn-primary"},{default:_(()=>s[18]||(s[18]=[t("i",{class:"fas fa-book-open me-2"},null,-1),r(" 浏览所有文章 ",-1)])),_:1,__:[18]})]))])])}}}),os=O(Kt,[["__scopeId","data-v-2029e213"]]);export{os as default};
