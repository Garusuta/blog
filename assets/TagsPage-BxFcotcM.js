import{j as F,r as b,d as _,w as I,H as U,q as d,u as t,B as h,y as g,z as l,A as y,L as $,S as Z,M as E,F as w,C as P,v as C,s as c,G as M,x as p,R as q,p as G,O as H}from"./vue-BfKCsOgC.js";import{u as O,_ as Q}from"./index-BUPr6R1i.js";import{P as W}from"./PaginationComponent-43gWXRBx.js";import"./libs-BNXOlkbY.js";import"./markdown--zrfzkwQ.js";import"./highlight-CjIDkcmk.js";import"./katex-734Zlhpu.js";const J={class:"tags"},K={class:"container py-5"},X={class:"row mb-5"},Y={class:"col-12"},tt={class:"text-center"},st={class:"lead text-muted"},et={class:"row mb-5"},ot={class:"col-12"},at={class:"card bg-light"},lt={class:"card-body"},nt={class:"row text-center"},ct={class:"col-md-4"},it={class:"stat-item"},dt={class:"text-success fw-bold"},rt={class:"col-md-4"},ut={class:"stat-item"},mt={class:"text-primary fw-bold"},_t={class:"col-md-4"},gt={class:"stat-item"},vt={class:"text-info fw-bold"},ht={class:"row mb-4"},pt={class:"col-md-6"},ft={class:"input-group"},xt={class:"col-md-6"},bt={class:"d-flex align-items-center justify-content-md-end"},yt={class:"row mb-5"},wt={class:"col-12"},Pt={class:"card"},Ct={class:"card-body"},kt={class:"tag-cloud"},St={key:0,class:"row"},Tt={class:"card h-100 tag-card"},zt={class:"card-body d-flex flex-column"},Bt={class:"d-flex align-items-center mb-3"},$t={class:"flex-grow-1"},Mt={class:"card-title mb-1"},qt={class:"text-muted small mb-0"},Vt={class:"mb-3"},Dt={class:"d-flex justify-content-between align-items-center mb-1"},Lt={class:"text-muted"},Nt={class:"progress",style:{height:"6px"}},Rt={class:"recent-posts mb-3 flex-grow-1"},jt={class:"list-group list-group-flush"},At={class:"text-truncate d-block"},Ft={class:"text-muted"},It={class:"mt-auto"},Ut={key:1,class:"row mt-5"},Zt={class:"col-12"},Et={key:2,class:"text-center py-5"},Gt={class:"mt-3 text-muted"},Ht={class:"text-muted"},k=12,Ot=F({__name:"TagsPage",setup(Qt){const f=U(),S=H(),n=O(),u=b(1),v=b("count-desc"),i=b(""),V=_(()=>n.tags[0]||null),D=_(()=>{if(n.tags.length===0)return 0;const e=n.tags.reduce((s,o)=>s+o.count,0);return Math.round(e/n.tags.length)}),m=_(()=>{let e=[...n.tags];if(i.value.trim()){const s=i.value.toLowerCase();e=e.filter(o=>o.name.toLowerCase().includes(s))}switch(v.value){case"count-asc":return e.sort((s,o)=>s.count-o.count);case"name-asc":return e.sort((s,o)=>s.name.localeCompare(o.name));case"name-desc":return e.sort((s,o)=>o.name.localeCompare(s.name));case"count-desc":default:return e.sort((s,o)=>o.count-s.count)}}),T=_(()=>Math.ceil(m.value.length/k)),z=_(()=>{const e=(u.value-1)*k,s=e+k;return m.value.slice(e,s)});function L(e){const s=Math.max(...n.tags.map(A=>A.count)),o=.8,r=o+e/s*(2.5-o),x=`hsl(${Math.floor(e/s*120)+120}, 70%, 50%)`;return{fontSize:`${r}rem`,color:x,margin:"0.25rem",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",backgroundColor:`${x}15`,border:`1px solid ${x}30`,transition:"all 0.2s ease"}}function B(e){const s=n.publishedPosts.length;return s>0?Math.round(e/s*100):0}function N(e,s=2){return n.publishedPosts.filter(o=>o.tags.includes(e)).slice(0,s)}function R(e){return new Date(e).toLocaleDateString("zh-CN",{month:"short",day:"numeric"})}function j(e){u.value=e,S.push({name:"Tags",query:{...f.query,page:e>1?e.toString():void 0}}),window.scrollTo({top:0,behavior:"smooth"})}if(I([i,v],()=>{u.value=1,S.push({name:"Tags",query:{}})}),f.query.page){const e=parseInt(f.query.page);e>0&&(u.value=e)}return(e,s)=>{const o=G("router-link");return c(),d("div",J,[t("div",K,[t("div",X,[t("div",Y,[t("div",tt,[s[3]||(s[3]=t("h1",{class:"display-5 fw-bold mb-3"},[t("i",{class:"fas fa-tags text-success me-3"}),g(" 文章标签 ")],-1)),t("p",st," 共 "+l(y(n).tags.length)+" 个标签，"+l(y(n).publishedPosts.length)+" 篇文章 ",1)])])]),t("div",et,[t("div",ot,[t("div",at,[t("div",lt,[t("div",nt,[t("div",ct,[t("div",it,[t("h3",dt,l(y(n).tags.length),1),s[4]||(s[4]=t("p",{class:"text-muted mb-0"},"总标签数",-1))])]),t("div",rt,[t("div",ut,[t("h3",mt,l(V.value?.count||0),1),s[5]||(s[5]=t("p",{class:"text-muted mb-0"},"最多文章数",-1))])]),t("div",_t,[t("div",gt,[t("h3",vt,l(D.value),1),s[6]||(s[6]=t("p",{class:"text-muted mb-0"},"平均文章数",-1))])])])])])])]),t("div",ht,[t("div",pt,[t("div",ft,[s[7]||(s[7]=t("span",{class:"input-group-text"},[t("i",{class:"fas fa-search"})],-1)),$(t("input",{type:"text",class:"form-control",placeholder:"搜索标签...","onUpdate:modelValue":s[0]||(s[0]=a=>i.value=a)},null,512),[[Z,i.value]])])]),t("div",xt,[t("div",bt,[s[9]||(s[9]=t("label",{for:"sortBy",class:"form-label me-3 mb-0"},"排序方式：",-1)),$(t("select",{id:"sortBy","onUpdate:modelValue":s[1]||(s[1]=a=>v.value=a),class:"form-select",style:{width:"auto"}},s[8]||(s[8]=[t("option",{value:"count-desc"},"文章数量（多到少）",-1),t("option",{value:"count-asc"},"文章数量（少到多）",-1),t("option",{value:"name-asc"},"标签名称（A-Z）",-1),t("option",{value:"name-desc"},"标签名称（Z-A）",-1)]),512),[[E,v.value]])])])]),t("div",yt,[t("div",wt,[t("div",Pt,[s[10]||(s[10]=t("div",{class:"card-header bg-success text-white"},[t("h5",{class:"card-title mb-0"},[t("i",{class:"fas fa-cloud me-2"}),g(" 标签云 ")])],-1)),t("div",Ct,[t("div",kt,[(c(!0),d(w,null,P(m.value.slice(0,30),a=>(c(),M(o,{key:a.name,to:`/tag/${a.slug}`,class:"tag-cloud-item text-decoration-none",style:q(L(a.count))},{default:p(()=>[g(" #"+l(a.name),1)]),_:2},1032,["to","style"]))),128))])])])])]),z.value.length>0?(c(),d("div",St,[(c(!0),d(w,null,P(z.value,a=>(c(),d("div",{key:a.name,class:"col-lg-3 col-md-4 col-sm-6 mb-4"},[t("div",Tt,[t("div",zt,[t("div",Bt,[s[11]||(s[11]=t("div",{class:"tag-icon me-3"},[t("i",{class:"fas fa-hashtag text-success"})],-1)),t("div",$t,[t("h5",Mt,[C(o,{to:`/tag/${a.slug}`,class:"text-decoration-none text-dark"},{default:p(()=>[g(l(a.name),1)]),_:2},1032,["to"])]),t("p",qt,l(a.count)+" 篇文章 ",1)])]),t("div",Vt,[t("div",Dt,[s[12]||(s[12]=t("small",{class:"text-muted"},"文章占比",-1)),t("small",Lt,l(B(a.count))+"%",1)]),t("div",Nt,[t("div",{class:"progress-bar bg-success",style:q({width:B(a.count)+"%"})},null,4)])]),t("div",Rt,[s[13]||(s[13]=t("h6",{class:"text-muted mb-2"},"最新文章：",-1)),t("div",jt,[(c(!0),d(w,null,P(N(a.name,2),r=>(c(),M(o,{key:r.id,to:`/post/${r.slug}`,class:"list-group-item list-group-item-action border-0 px-0 py-1 text-decoration-none"},{default:p(()=>[t("small",At,l(r.title),1),t("small",Ft,l(R(r.date)),1)]),_:2},1032,["to"]))),128))])]),t("div",It,[C(o,{to:`/tag/${a.slug}`,class:"btn btn-outline-success btn-sm w-100"},{default:p(()=>[g(" 查看全部 "+l(a.count)+" 篇文章 ",1),s[14]||(s[14]=t("i",{class:"fas fa-arrow-right ms-1"},null,-1))]),_:2,__:[14]},1032,["to"])])])])]))),128))])):h("",!0),T.value>1?(c(),d("div",Ut,[t("div",Zt,[C(W,{"current-page":u.value,"total-pages":T.value,total:m.value.length,onPageChange:j},null,8,["current-page","total-pages","total"])])])):h("",!0),m.value.length===0?(c(),d("div",Et,[s[15]||(s[15]=t("i",{class:"fas fa-tag text-muted",style:{"font-size":"4rem"}},null,-1)),t("h3",Gt,l(i.value?"未找到匹配的标签":"暂无标签"),1),t("p",Ht,l(i.value?"请尝试其他关键词":"还没有创建任何标签"),1),i.value?(c(),d("button",{key:0,onClick:s[2]||(s[2]=a=>i.value=""),class:"btn btn-outline-primary"}," 清除搜索 ")):h("",!0)])):h("",!0)])])}}}),os=Q(Ot,[["__scopeId","data-v-6730e299"]]);export{os as default};
