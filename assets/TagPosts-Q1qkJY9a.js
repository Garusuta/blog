import{j as U,r as T,d as v,H as $,w as j,q as n,u as s,B as k,v as g,x as p,p as F,z as i,L as M,M as I,N as V,y as r,F as _,C as f,s as l,G as S,D,A as Z,O as G}from"./vue-DoCjM5oa.js";import{u as H,c as O,_ as J}from"./index-BbbbMKqL.js";import{P as K}from"./PostCard-82PCuhVG.js";import{P as Q}from"./PaginationComponent-CIcd_D8L.js";import"./libs--DbO3urw.js";import"./markdown--zrfzkwQ.js";import"./highlight-CjIDkcmk.js";import"./katex-734Zlhpu.js";const W={class:"tag-posts"},X={class:"container py-5"},Y={class:"row mb-5"},ss={class:"col-12"},ts={class:"tag-header text-center"},es={class:"mb-3"},as={class:"tag-info mb-4"},os={class:"display-5 fw-bold mb-3"},ls={class:"lead text-muted"},ns={class:"row justify-content-center"},is={class:"col-md-8"},rs={class:"card bg-light"},ds={class:"card-body"},cs={class:"row text-center"},us={class:"col-4"},ms={class:"text-success fw-bold"},vs={class:"col-4"},gs={class:"text-primary fw-bold"},ps={class:"col-4"},_s={class:"text-info fw-bold"},fs={key:0,class:"row mb-4"},bs={class:"col-md-6"},hs={class:"d-flex align-items-center"},ys={class:"col-md-6"},xs={class:"d-flex align-items-center justify-content-md-end"},ws={class:"btn-group",role:"group"},ks={key:1,class:"row mb-4"},Ps={class:"col-12"},Cs={class:"card"},Ts={class:"card-body"},Ms={class:"d-flex flex-wrap gap-2"},Ds={class:"badge bg-light text-primary ms-1"},Bs={key:2,class:"row mb-4"},Ns={class:"col-12"},qs={class:"card"},Vs={class:"card-body"},Ss={class:"d-flex flex-wrap gap-2"},As={key:3},Es={key:0,class:"row"},Ls={key:1,class:"row"},zs={class:"col-12"},Rs={class:"card-body"},Us={class:"row align-items-center"},$s={class:"col-md-8"},js={class:"card-title mb-2"},Fs={key:0,class:"badge bg-warning text-dark ms-2"},Is={class:"card-text text-muted mb-2"},Zs={class:"d-flex flex-wrap gap-1 mb-2"},Gs={class:"d-flex flex-wrap gap-1"},Hs={class:"col-md-4 text-md-end"},Os={class:"text-muted small mb-2"},Js={class:"mb-1"},Ks={class:"mb-1"},Qs={class:"row mt-5"},Ws={class:"col-12"},Xs={key:4,class:"text-center py-5"},Ys={class:"text-muted mb-4"},st=U({__name:"TagPosts",props:{name:{}},setup(A){const B=A,u=$(),N=G(),x=H(),c=T(1),w=T("date-desc"),b=T("grid"),h=v(()=>{const a=B.name||u.params.name,t=x.tags.find(o=>o.slug===a);return t?t.name:a.replace(/-/g," ")}),m=v(()=>{const a=B.name||u.params.name;return x.getPostsByTag(a)}),P=v(()=>{const a=[...m.value];switch(w.value){case"date-asc":return a.sort((t,o)=>new Date(t.date).getTime()-new Date(o.date).getTime());case"title-asc":return a.sort((t,o)=>t.title.localeCompare(o.title));case"title-desc":return a.sort((t,o)=>o.title.localeCompare(t.title));case"date-desc":default:return a.sort((t,o)=>new Date(o.date).getTime()-new Date(t.date).getTime())}}),y=v(()=>{const a=x.config.pagination.postsPerPage,t=(c.value-1)*a,o=t+a,e=P.value.slice(t,o),d=Math.ceil(P.value.length/a);return{posts:e,currentPage:c.value,totalPages:d,hasNext:c.value<d,hasPrev:c.value>1,total:P.value.length}}),C=v(()=>{const a=new Map;return m.value.forEach(t=>{t.categories.forEach(o=>{a.set(o,(a.get(o)||0)+1)})}),Array.from(a.entries()).map(([t,o])=>({name:t,slug:t.toLowerCase().replace(/\s+/g,"-"),count:o})).sort((t,o)=>o.count-t.count).slice(0,8)}),q=v(()=>{const a=new Map;return m.value.forEach(t=>{t.tags.forEach(o=>{a.set(o,(a.get(o)||0)+1)})}),Array.from(a.entries()).map(([t,o])=>({name:t,slug:t.toLowerCase().replace(/\s+/g,"-"),count:o})).sort((t,o)=>o.count-t.count).slice(0,10)});function E(){const a=x.publishedPosts.length;return a>0?Math.round(m.value.length/a*100):0}function L(){return C.value.length}function z(a){return new Date(a).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})}function R(a){c.value=a,N.push({name:"TagPosts",params:{name:u.params.name},query:{...u.query,page:a>1?a.toString():void 0}}),window.scrollTo({top:0,behavior:"smooth"})}if(j(w,()=>{c.value=1,N.push({name:"TagPosts",params:{name:u.params.name},query:{}})}),u.query.page){const a=parseInt(u.query.page);a>0&&(c.value=a)}return(a,t)=>{const o=F("router-link");return l(),n("div",W,[s("div",X,[s("div",Y,[s("div",ss,[s("div",ts,[s("div",es,[g(o,{to:"/tags",class:"btn btn-outline-secondary btn-sm"},{default:p(()=>t[3]||(t[3]=[s("i",{class:"fas fa-arrow-left me-2"},null,-1),r(" 返回标签列表 ",-1)])),_:1,__:[3]})]),s("div",as,[t[4]||(t[4]=s("div",{class:"tag-icon mx-auto mb-3"},[s("i",{class:"fas fa-hashtag text-success"})],-1)),s("h1",os,"#"+i(h.value),1),s("p",ls," 共 "+i(m.value.length)+" 篇文章 ",1)]),s("div",ns,[s("div",is,[s("div",rs,[s("div",ds,[s("div",cs,[s("div",us,[s("h4",ms,i(m.value.length),1),t[5]||(t[5]=s("small",{class:"text-muted"},"文章总数",-1))]),s("div",vs,[s("h4",gs,i(E())+"%",1),t[6]||(t[6]=s("small",{class:"text-muted"},"占总文章",-1))]),s("div",ps,[s("h4",_s,i(L()),1),t[7]||(t[7]=s("small",{class:"text-muted"},"相关分类",-1))])])])])])])])])]),m.value.length>0?(l(),n("div",fs,[s("div",bs,[s("div",hs,[t[9]||(t[9]=s("label",{for:"sortBy",class:"form-label me-3 mb-0"},"排序方式：",-1)),M(s("select",{id:"sortBy","onUpdate:modelValue":t[0]||(t[0]=e=>w.value=e),class:"form-select",style:{width:"auto"}},t[8]||(t[8]=[s("option",{value:"date-desc"},"最新发布",-1),s("option",{value:"date-asc"},"最早发布",-1),s("option",{value:"title-asc"},"标题 A-Z",-1),s("option",{value:"title-desc"},"标题 Z-A",-1)]),512),[[I,w.value]])])]),s("div",ys,[s("div",xs,[t[12]||(t[12]=s("label",{for:"viewMode",class:"form-label me-3 mb-0"},"显示模式：",-1)),s("div",ws,[M(s("input",{type:"radio",class:"btn-check",name:"viewMode",id:"grid-view","onUpdate:modelValue":t[1]||(t[1]=e=>b.value=e),value:"grid"},null,512),[[V,b.value]]),t[10]||(t[10]=s("label",{class:"btn btn-outline-primary",for:"grid-view"},[s("i",{class:"fas fa-th"})],-1)),M(s("input",{type:"radio",class:"btn-check",name:"viewMode",id:"list-view","onUpdate:modelValue":t[2]||(t[2]=e=>b.value=e),value:"list"},null,512),[[V,b.value]]),t[11]||(t[11]=s("label",{class:"btn btn-outline-primary",for:"list-view"},[s("i",{class:"fas fa-list"})],-1))])])])])):k("",!0),C.value.length>0?(l(),n("div",ks,[s("div",Ps,[s("div",Cs,[s("div",Ts,[t[13]||(t[13]=s("h6",{class:"card-title mb-3"},[s("i",{class:"fas fa-folder text-primary me-2"}),r(" 相关分类 ")],-1)),s("div",Ms,[(l(!0),n(_,null,f(C.value,e=>(l(),S(o,{key:e.name,to:`/category/${e.slug}`,class:"badge bg-primary text-decoration-none fs-6 py-2 px-3"},{default:p(()=>[r(i(e.name)+" ",1),s("span",Ds,i(e.count),1)]),_:2},1032,["to"]))),128))])])])])])):k("",!0),q.value.length>0?(l(),n("div",Bs,[s("div",Ns,[s("div",qs,[s("div",Vs,[t[14]||(t[14]=s("h6",{class:"card-title mb-3"},[s("i",{class:"fas fa-tags text-success me-2"}),r(" 相关标签 ")],-1)),s("div",Ss,[(l(!0),n(_,null,f(q.value,e=>(l(),S(o,{key:e.name,to:`/tag/${e.slug}`,class:D(["badge bg-success text-decoration-none fs-6 py-2 px-3",{"bg-secondary":e.name===h.value}])},{default:p(()=>[r(" #"+i(e.name)+" ",1),s("span",{class:D(["badge bg-light ms-1",e.name===h.value?"text-secondary":"text-success"])},i(e.count),3)]),_:2},1032,["to","class"]))),128))])])])])])):k("",!0),y.value.posts.length>0?(l(),n("div",As,[b.value==="grid"?(l(),n("div",Es,[(l(!0),n(_,null,f(y.value.posts,e=>(l(),n("div",{key:e.id,class:"col-lg-4 col-md-6 mb-4"},[g(K,{post:e},null,8,["post"])]))),128))])):(l(),n("div",Ls,[s("div",zs,[(l(!0),n(_,null,f(y.value.posts,e=>(l(),n("div",{key:e.id,class:"card mb-4 post-list-item"},[s("div",Rs,[s("div",Us,[s("div",$s,[s("h5",js,[g(o,{to:`/post/${e.slug}`,class:"text-decoration-none text-dark"},{default:p(()=>[r(i(e.title),1)]),_:2},1032,["to"]),e.featured?(l(),n("span",Fs,t[15]||(t[15]=[s("i",{class:"fas fa-star"},null,-1),r(" 精选 ",-1)]))):k("",!0)]),s("p",Is,i(e.excerpt),1),s("div",Zs,[(l(!0),n(_,null,f(e.categories,d=>(l(),n("span",{key:d,class:"badge bg-primary"},i(d),1))),128))]),s("div",Gs,[(l(!0),n(_,null,f(e.tags.slice(0,4),d=>(l(),n("span",{key:d,class:D(["badge bg-secondary",{"bg-success":d===h.value}])}," #"+i(d),3))),128))])]),s("div",Hs,[s("div",Os,[s("div",Js,[t[16]||(t[16]=s("i",{class:"fas fa-user me-1"},null,-1)),r(" "+i(e.author),1)]),s("div",Ks,[t[17]||(t[17]=s("i",{class:"fas fa-calendar me-1"},null,-1)),r(" "+i(z(e.date)),1)]),s("div",null,[t[18]||(t[18]=s("i",{class:"fas fa-clock me-1"},null,-1)),r(" "+i(e.readTime||Z(O)(e.content))+" 分钟阅读 ",1)])]),g(o,{to:`/post/${e.slug}`,class:"btn btn-outline-primary btn-sm"},{default:p(()=>t[19]||(t[19]=[r(" 阅读全文 ",-1),s("i",{class:"fas fa-arrow-right ms-1"},null,-1)])),_:2,__:[19]},1032,["to"])])])])]))),128))])])),s("div",Qs,[s("div",Ws,[g(Q,{"current-page":c.value,"total-pages":y.value.totalPages,total:y.value.total,onPageChange:R},null,8,["current-page","total-pages","total"])])])])):(l(),n("div",Xs,[t[21]||(t[21]=s("i",{class:"fas fa-file-alt text-muted",style:{"font-size":"4rem"}},null,-1)),t[22]||(t[22]=s("h3",{class:"mt-3 text-muted"},"该标签下暂无文章",-1)),s("p",Ys,"#"+i(h.value)+" 标签下还没有发布任何文章",1),g(o,{to:"/posts",class:"btn btn-primary"},{default:p(()=>t[20]||(t[20]=[s("i",{class:"fas fa-book-open me-2"},null,-1),r(" 浏览所有文章 ",-1)])),_:1,__:[20]})]))])])}}}),dt=J(st,[["__scopeId","data-v-e5cce885"]]);export{dt as default};
