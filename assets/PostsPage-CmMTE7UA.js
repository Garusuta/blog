import{j as T,r as b,d as P,w as N,H as V,q as o,u as t,y as r,z as d,A as q,L as y,M as S,N as k,F as h,C as w,v as p,s as l,B as C,x as D,p as z,O as A}from"./vue-DoCjM5oa.js";import{u as L,_ as R}from"./index-B3sJWVzY.js";import{P as U}from"./PostCard-BxLN5ZJh.js";import{P as j}from"./PaginationComponent-Du-JYp-H.js";import"./libs--DbO3urw.js";import"./markdown--zrfzkwQ.js";import"./highlight-CjIDkcmk.js";import"./katex-734Zlhpu.js";const F={class:"posts"},I={class:"container py-5"},Z={class:"row mb-5"},$={class:"col-12"},E={class:"text-center"},H={class:"lead text-muted"},O={class:"row mb-4"},G={class:"col-md-6"},J={class:"d-flex align-items-center"},K={class:"col-md-6"},Q={class:"d-flex align-items-center justify-content-md-end"},W={class:"btn-group",role:"group"},X={key:0},Y={key:0,class:"row"},tt={key:1,class:"row"},et={class:"col-12"},st={class:"card-body"},at={class:"row align-items-center"},ot={class:"col-md-8"},lt={class:"card-title mb-2"},it={key:0,class:"badge bg-warning text-dark ms-2"},nt={class:"card-text text-muted mb-2"},rt={class:"d-flex flex-wrap gap-1 mb-2"},dt={class:"col-md-4 text-md-end"},ct={class:"text-muted small mb-2"},ut={class:"mb-1"},mt={class:"mb-1"},vt={key:0},pt={class:"row mt-5"},gt={class:"col-12"},ft={key:1,class:"text-center py-5"},_t=T({__name:"PostsPage",setup(bt){const g=V(),x=A(),f=L(),n=b(1),v=b("date-desc"),c=b("grid"),_=P(()=>{const a=[...f.publishedPosts];switch(v.value){case"date-asc":return a.sort((e,i)=>new Date(e.date).getTime()-new Date(i.date).getTime());case"title-asc":return a.sort((e,i)=>e.title.localeCompare(i.title));case"title-desc":return a.sort((e,i)=>i.title.localeCompare(e.title));case"date-desc":default:return a.sort((e,i)=>new Date(i.date).getTime()-new Date(e.date).getTime())}}),u=P(()=>{const a=f.config.pagination.postsPerPage,e=(n.value-1)*a,i=e+a,s=_.value.slice(e,i),m=Math.ceil(_.value.length/a);return{posts:s,currentPage:n.value,totalPages:m,hasNext:n.value<m,hasPrev:n.value>1,total:_.value.length}});function B(a){n.value=a,x.push({name:"Posts",query:{...g.query,page:a>1?a.toString():void 0}}),window.scrollTo({top:0,behavior:"smooth"})}function M(a){return new Date(a).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"})}if(N(v,()=>{n.value=1,x.push({name:"Posts",query:{}})}),g.query.page){const a=parseInt(g.query.page);a>0&&(n.value=a)}return(a,e)=>{const i=z("router-link");return l(),o("div",F,[t("div",I,[t("div",Z,[t("div",$,[t("div",E,[e[3]||(e[3]=t("h1",{class:"display-5 fw-bold mb-3"},[t("i",{class:"fas fa-book-open text-primary"}),r(" 所有文章 ")],-1)),t("p",H," 共 "+d(q(f).publishedPosts.length)+" 篇文章 ",1)])])]),t("div",O,[t("div",G,[t("div",J,[e[5]||(e[5]=t("label",{for:"sortBy",class:"form-label me-3 mb-0"},"排序方式：",-1)),y(t("select",{id:"sortBy","onUpdate:modelValue":e[0]||(e[0]=s=>v.value=s),class:"form-select",style:{width:"auto"}},e[4]||(e[4]=[t("option",{value:"date-desc"},"最新发布",-1),t("option",{value:"date-asc"},"最早发布",-1),t("option",{value:"title-asc"},"标题 A-Z",-1),t("option",{value:"title-desc"},"标题 Z-A",-1)]),512),[[S,v.value]])])]),t("div",K,[t("div",Q,[e[8]||(e[8]=t("label",{for:"viewMode",class:"form-label me-3 mb-0"},"显示模式：",-1)),t("div",W,[y(t("input",{type:"radio",class:"btn-check",name:"viewMode",id:"grid-view","onUpdate:modelValue":e[1]||(e[1]=s=>c.value=s),value:"grid"},null,512),[[k,c.value]]),e[6]||(e[6]=t("label",{class:"btn btn-outline-primary",for:"grid-view"},[t("i",{class:"fas fa-th"})],-1)),y(t("input",{type:"radio",class:"btn-check",name:"viewMode",id:"list-view","onUpdate:modelValue":e[2]||(e[2]=s=>c.value=s),value:"list"},null,512),[[k,c.value]]),e[7]||(e[7]=t("label",{class:"btn btn-outline-primary",for:"list-view"},[t("i",{class:"fas fa-list"})],-1))])])])]),u.value.posts.length>0?(l(),o("div",X,[c.value==="grid"?(l(),o("div",Y,[(l(!0),o(h,null,w(u.value.posts,s=>(l(),o("div",{key:s.id,class:"col-lg-4 col-md-6 mb-4"},[p(U,{post:s},null,8,["post"])]))),128))])):(l(),o("div",tt,[t("div",et,[(l(!0),o(h,null,w(u.value.posts,s=>(l(),o("div",{key:s.id,class:"card mb-4 post-list-item"},[t("div",st,[t("div",at,[t("div",ot,[t("h5",lt,[p(i,{to:`/post/${s.slug}`,class:"text-decoration-none text-dark"},{default:D(()=>[r(d(s.title),1)]),_:2},1032,["to"]),s.featured?(l(),o("span",it,e[9]||(e[9]=[t("i",{class:"fas fa-star"},null,-1),r(" 精选 ",-1)]))):C("",!0)]),t("p",nt,d(s.excerpt),1),t("div",rt,[(l(!0),o(h,null,w(s.categories,m=>(l(),o("span",{key:m,class:"badge bg-primary"},d(m),1))),128))])]),t("div",dt,[t("div",ct,[t("div",ut,[e[10]||(e[10]=t("i",{class:"fas fa-user me-1"},null,-1)),r(" "+d(s.author),1)]),t("div",mt,[e[11]||(e[11]=t("i",{class:"fas fa-calendar me-1"},null,-1)),r(" "+d(M(s.date)),1)]),s.readTime?(l(),o("div",vt,[e[12]||(e[12]=t("i",{class:"fas fa-clock me-1"},null,-1)),r(" "+d(s.readTime)+" 分钟阅读 ",1)])):C("",!0)]),p(i,{to:`/post/${s.slug}`,class:"btn btn-outline-primary btn-sm"},{default:D(()=>e[13]||(e[13]=[r(" 阅读全文 ",-1),t("i",{class:"fas fa-arrow-right ms-1"},null,-1)])),_:2,__:[13]},1032,["to"])])])])]))),128))])])),t("div",pt,[t("div",gt,[p(j,{"current-page":n.value,"total-pages":u.value.totalPages,total:u.value.total,onPageChange:B},null,8,["current-page","total-pages","total"])])])])):(l(),o("div",ft,e[14]||(e[14]=[t("i",{class:"fas fa-file-alt text-muted",style:{"font-size":"4rem"}},null,-1),t("h3",{class:"mt-3 text-muted"},"暂无文章",-1),t("p",{class:"text-muted"},"还没有发布任何文章",-1)])))])])}}}),Bt=R(_t,[["__scopeId","data-v-b1472774"]]);export{Bt as default};
